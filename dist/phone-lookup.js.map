{"version":3,"sources":["../modules/PhoneLookup.jsx"],"names":[],"mappings":"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","file":"phone-lookup.js","sourcesContent":["import React     from 'react'\nimport _         from 'lodash'\n\nfunction escapeRegExp(str) {\n  return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n}\n\nfunction match(value, item) {\n  const regexp = new RegExp(escapeRegExp(value), 'i')\n  return regexp.test(item.name) || regexp.test(item.phone.replace(/ /g, ''))\n}\n\nconst ulStyles = {\n  position   : 'absolute',\n  background : '#fff',\n  border     : '1px solid #ddd',\n  width      : '200px',\n  listStyle  : 'none',\n  margin     : 0,\n  padding    : 0,\n  zIndex     : 4\n}\n\nclass DefaultResults extends React.Component {\n  constructor(props) {\n    super(props)\n  }\n  render() {\n    const { results, onSelectionChange } = this.props\n    return (\n      <ul style={ulStyles}>\n        {results.map((result, key) => {\n          return (\n            <li key={key}>\n              <span style={{float: 'right'}}>\n                {result.phone}\n              </span>\n              <a href='#' onClick={() => onSelectionChange(result)}>\n                {result.name} \n              </a>\n            </li>\n          )\n        })}\n      </ul>\n    )\n  }\n}\n\nclass DefaultInput extends React.Component {\n  constructor(props) {\n    super(props)\n  }\n  render() {\n    const { hasEntry, value, onChange, onReset, onCallNumber, isValidNumber } = this.props\n    const inputStyle = hasEntry ? {\n      backgroundColor: '#fff4a8'\n    } : isValidNumber ? {\n      backgroundColor: '#a8f4a8'\n    } : {}\n    return (\n      <div>\n        <input \n          type     = 'text'\n          style    = {inputStyle}\n          value    = {value}\n          onChange = {onChange}\n        />\n        {(hasEntry || isValidNumber) && (\n          <span>\n            <button onClick={onReset}>Reset</button>\n            <button onClick={onCallNumber}>Call</button>\n          </span>\n        )}\n      </div>\n    )\n  }\n}\n\nclass PhoneLookup extends React.Component {\n  constructor(props) {\n    let entries = {}\n    props.entries.forEach(item => { entries[item.phone] = item })\n    super({\n      entries, ...props\n    })\n    this.state = {\n      value    : '',\n      results  : [],\n      entry    : null,\n      isNumber : false\n    }\n  }\n  handleChange(event) {\n    const { entries, regexp } = this.props\n    const value = event.target ? event.target.value : event\n    const results = value ? _.pick(entries, item => match(value, item)) : {}\n    this.setState({ \n      value, \n      results, \n      isNumber : regexp.test(value.replace(/ /g, '')),\n      entry    : null \n    })\n  }\n  selectEntry(entry) {\n    this.setState({\n      value    : entry ? entry.name : '',\n      results  : [],\n      isNumber : false,\n      entry\n    })\n  }\n  reset() {\n    this.selectEntry()\n  }\n  render() {\n    const { value, results, entry, isNumber } = this.state\n    const { maxResults, resultsComponent, inputComponent, onCallNumber } = this.props\n    const keys = _.keysIn(results)\n    const Results = resultsComponent\n    const Input = inputComponent\n    return (\n      <div>\n        <Input \n          hasEntry      = {!!entry}\n          value         = {value}\n          isValidNumber = {isNumber}\n          onReset       = {this.reset.bind(this)}\n          onCallNumber  = {() => onCallNumber(entry ? entry.phone : value)}\n          onChange      = {this.handleChange.bind(this)} />\n        {!!keys.length && !isNumber && (\n          <Results \n            onSelectionChange = {this.selectEntry.bind(this)}\n            results            = {keys.slice(0, maxResults ? maxResults : -1).map(key => results[key])} />\n        )}\n      </div>\n    )\n  }\n}\n\nPhoneLookup.defaultProps = {\n  maxResults       : 10,\n  entries          : [],\n  resultsComponent : DefaultResults,\n  inputComponent   : DefaultInput,\n  regexp           : /^(\\+?[0-9]{1,3}\\-?|0)[0123456789]{9}$/,\n  onCallNumber     : number => { console.log(number) } \n}\n\nexport default PhoneLookup\n"]}